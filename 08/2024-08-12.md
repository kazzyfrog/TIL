---
date created: 2024-08-12, 04:22
date modified: 2024-08-13, 01:49
---

記事読んだ
[自己文書化コードを書く](https://dev.to/mattlewandowski93/writing-self-documenting-code-4lga)

## 自己文書化コードとは何ですか?

自己文書化コードは、明確で表現力豊かで意図的な方法で書かれたコードであり、広範なコメントや外部文書を必要とせずに、その目的と機能を簡単に理解できるようにします。

それは、次のようなコードを書くことです。

- **読みやすい:**  一目で読みやすく理解しやすいコード
- **表現力豊かな：**その意図と目的を明確に伝えるコード
- **メンテナンス可能:**  バグを導入したり、変更を壊したりすることなく、簡単に変更および更新できるコード

ようは、理解するのが簡単な、リーダブルなコード！

## 自己文書化コードが重要な理由

自己文書化コードを書くと、いくつかの利点があります。

1. 認知負荷が減る
2. 新しいメンバーがより早くキャッチアップすることができる
3. チームメンバーの、誤解・認識齟齬をなくす
4. メンテナンスと更新が容易

## 自己文書化コードを書くためのテクニック

具体的なテクニック

### 意味のある名前を使う

### 小さくて焦点を絞った関数を書く

小さくて焦点を絞った関数を書くことは、自己文書化コードのもう一つの重要な側面です。機能は単一の責任を持ち、その目的を反映して正確に命名されるべきです。

### 記述的な関数名とメソッド名を使用する

関数とメソッドに名前を付けるときは、その目的と行動を明確に伝える説明的な名前を使用してください。Handle() や process() のような一般的な名前は避けてください。代わりに、関数が何をするかを説明する名前を選んでください

### TypeScript の Type System をレバレッジする

TypeScript の強力な型システムは、コードの自己文書化の性質を大幅に強化することができます。TypeScript の機能を活用することで、コードをより表現力豊かにし、潜在的なエラーを早期にキャッチすることができます

### 一貫性を確立し、チームで期待値を設定する

チームの一員としてコードベースに取り組む場合、一貫性を確立し、明確な期待を設定することが重要です。これにより、全員が同じページにいて、同じ慣習に従うようにし、コードがより読みやすく、保守可能になります。

一貫性の重要な側面の 1 つは、命名規則です。変数、関数、クラス、およびその他のエンティティの名前の方法を定義するスタイルガイドを確立します。たとえば、次の用語とその意味を考えてみましょう。

- `get`: API またはデータソースから単一の値を取得します。
- `list`: API またはデータソースから一連の値を取得します。
- `patch`: 既存のエンティティまたはオブジェクトを部分的に更新します。
- `upsert`: 既存のエンティティを更新するか、存在しない場合は新しいエンティティを挿入します。

例：

```js

```

getUsername()
listUsers()

```

```

### 複雑なシナリオに JSDoc または TSDoc を使用する

自己文書化コードが主な目標であるべきですが、複雑なアルゴリズムや複雑なビジネスロジックなど、追加の文書化が必要な場合があります。このようなシナリオでは、JSDoc または TSDoc を使用して、明確で簡潔なドキュメントを提供することを検討してください。
JSDoc または TSDoc を使用することで、コードベース自体を乱雑にすることなく、複雑なコードの追加のコンテキストと説明を提供できます。

## 結論

自己文書化コードを書くことは、すべての開発者が習得するために努力すべき芸術です。意味のある名前、小さくて焦点を絞った関数、TypeScript の型システム、ドキュメントの賢明な使用を活用することで、読みやすく、表現力豊かで、維持可能なコードを作成できます。

目標は、それ自体を語るコードを書き、外部ドキュメントへの依存を減らし、仲間の開発者の生活を楽にすることを忘れないでください。だから、次回コードを書くときは、より自己文書化する方法を考えてみてください。あなたの将来の自分とあなたのチームメイトはあなたに感謝するでしょう!

## 所感

定期的に、この手のクリーンコードの記事を読むべきだと思った。
もちろん普段できていることも多いが、そうじゃないこと、改めて学べることが多い。
大事！

---

## フルスタック Next.js アプリのデプロイ先の調査

下記にて：
https://github.com/lgtm-factory/lgtm-factory/discussions/60

メモ：

## 帯域幅について

帯域幅（バンドワイズ、英語: bandwidth）は、通信やネットワークの分野で重要な概念です。簡単に言えば、一定時間内にデータを転送できる量を指します。より詳しく説明すると：

1. 定義：

   - 特定の時間内にネットワークを通じて転送できるデータの最大量
   - 通常、ビット/秒（bps）やその倍数（Kbps, Mbps, Gbps）で表される

2. ウェブホスティングにおける帯域幅：

   - サーバーからユーザーに送信されるデータ量と、ユーザーからサーバーに送信されるデータ量の合計
   - 多くの場合、月単位で計測される（例：100GB/月）

3. 重要性：

   - ウェブサイトの速度とパフォーマンスに直接影響する
   - 大量のトラフィックを処理する能力を決定する

4. 帯域幅制限の意味：

   - ホスティングプロバイダーが設定する、転送できるデータ量の上限
   - 制限を超えると、追加料金が発生したり、サービスが一時的に停止したりする場合がある

5. 帯域幅を消費する要因：

   - ページビュー数
   - ファイルのダウンロード/アップロード
   - ストリーミングコンテンツ（動画、音楽など）
   - 大きな画像や動画の表示

6. Vercel vs Cloudflare Pages の比較：
   - Vercel: 無料プランで 100GB/月の帯域幅制限
   - Cloudflare Pages: 帯域幅に制限なし（無制限）

Cloudflare Pages が帯域幅に制限を設けていないのは大きな利点です。これは、大量のトラフィックを扱うサイトや、大きなファイルを頻繁に転送する必要があるアプリケーションにとって特に有利です。

一方、Vercel の 100GB/月という制限は、多くの小規模から中規模のウェブサイトやアプリケーションにとっては十分な量です。ただし、トラフィックが急増したり、大容量のコンテンツを扱う場合には、この制限に注意が必要です。

帯域幅の使用量は、アプリケーションの性質、ユーザー数、提供するコンテンツのタイプによって大きく異なります。そのため、プロジェクトの具体的な要件と予想されるトラフィックパターンを考慮して、適切なホスティングソリューションを選択することが重要です。

## 「Cloudflare Pages/Workers: 100,000 リクエスト/日 」VS「Vercel: 無料プランで 100GB- 時間/月」

ご質問ありがとうございます。ざっくりとした比較をするために、いくつかの仮定を置いて計算してみましょう。

1. Cloudflare Pages: 100,000 リクエスト/日
   月に換算すると: 100,000 \* 30 = 3,000,000 リクエスト/月

2. Vercel: 100GB- 時間/月
   これを理解しやすいリクエスト数に変換するには、平均的なリクエストの実行時間とメモリ使用量を仮定する必要があります。

仮定：

- 平均的なリクエストが 0.1 秒（100 ミリ秒）で処理される
- 平均的なメモリ使用量が 128MB（0.125GB）

計算：
100GB- 時間 = 100 _ 3600 秒 = 360,000GB- 秒
1 リクエストあたりの GB- 秒 = 0.1 秒 _ 0.125GB = 0.0125GB- 秒
可能なリクエスト数 = 360,000GB- 秒 / 0.0125GB- 秒 = 28,800,000 リクエスト/月

この仮定の下では：
Vercel: 約 28,800,000 リクエスト/月
Cloudflare Pages: 約 3,000,000 リクエスト/月

したがって、この仮定の下では、Vercel の枠の方が大きいと言えます。

ただし、以下の点に注意が必要です：

1. 実際のリクエストの処理時間やメモリ使用量は、アプリケーションの性質によって大きく異なります。
2. Cloudflare の制限は日単位なので、短期的なスパイクに強い可能性があります。
3. Vercel の制限は月単位で、より長期的な使用パターンに適しています。

結論：
一般的なケースでは、Vercel の枠の方が大きい可能性が高いですが、実際の使用状況によって変わる可能性があります。特に、リクエストが非常に軽量で短時間で処理される場合、Vercel の利点はさらに大きくなります。一方、リクエストが複雑で長時間の処理を要する場合、Cloudflare の方が有利になる可能性があります。

実際のアプリケーションでの使用量を測定し、それに基づいて判断することをお勧めします。

## メモ：

無料枠のリクエスト自体は、vercel の方が余裕あるっぽい。。！？
next/ImageResponse を使用した画像生成の場合、ほとんど軽量な処理だろうし！

## 参考

vercel の制限
https://vercel.com/docs/limits/overview

Cloudflare の制限
https://www.cloudflare.com/ja-jp/plans/developer-platform/

【Vercel】Hobby プランの API ルート（Serverless Function）でハマった話
https://qiita.com/goqsystem_nagaoka/items/9f7ecbb8e424b86cae6c

Cloudflare Workers を使う前に知っておきたい注意点
https://zenn.dev/catnose99/articles/d1d16e11e7c6d0

Cloudflare Pages 入門
https://zenn.dev/t_kakei/scraps/1eb3662e1ff8cb

Cloudflare Pages・Vercel ・Netlify の違いや使い分けをまとめる
https://zenn.dev/catnose99/scraps/6780379210136f
