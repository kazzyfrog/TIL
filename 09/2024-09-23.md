---
date created: 2024-09-23, 17:50
date modified: 2024-09-24, 16:37
---

# Next.js での、Google Analytics の設定

まず疑問！

Google Analytics の測定 ID (GA ID) は、ハードコーディングせず、環境変数として扱うことを強くお勧め。

Google Analytics の測定 ID (GA ID) は、ブラウザに渡される値であり、公開されても直接的なセキュリティリスクはありません。しかし、以下の点を考慮する必要があります：

1. ベストプラクティス：機密情報ではありませんが、設定値を環境変数として扱うことは一般的なベストプラクティスです。
2. 環境の分離：開発、ステージング、本番環境で異なる GA ID を使用したい場合、環境変数を使用すると簡単に切り替えられます。
3. コードの再利用性：GA ID をハードコーディングすると、別のプロジェクトで再利用する際に変更が必要になります。
4. アクセス制御：公開リポジトリの場合、GA ID を直接コードに記述すると、誰でも見ることができます。これにより、不要なアクセスや悪用のリスクが若干高まる可能性があります。
5. プライバシーへの配慮：一部のユーザーは、トラッキングに敏感な場合があります。環境変数を使用することで、コードを見ても即座に GA ID が分からないようにできます。

したがって、セキュリティ上の直接的なリスクは低いものの、上記の理由から環境変数として扱うことが推奨されます。ただし、クライアントサイドで実行されるコードなので、最終的にはブラウザで GA ID が見えることは避けられません。

では、実装する。
手順は、：

- Next で提供されている、`@next/third-parties/google` を導入し、専用のコンポーネントに、gaId を渡すだけで使用可能！
- gaId は、GA のサイトで、設定して取得する！
- これは、環境変数用のファイルに格納する！

上記の通りで、簡単に実装できた！

## 残課題

ついでに、下記も行う！

- やっておいたほうが良い初期設定
- サーチコンソールの設定
- （タグマネージャの設定？）
- プライバシーポリシーの用意？
