---
date created: 2024-07-25, 01:41
date modified: 2024-07-26, 02:38
---

# やったこと

下記確認した。

- sitemap
- robots
- instrumentation.js
- middleware.js
  特に、sitemap で設定する内容について、深掘りしてみた

- 将来使いまわすテンプレと、今作ってるのをいい感じに切り分ける方法を決めた！
  - （テンプレの方に、設定追加したら、それを継承しているサイトの方にも変更を取り込みたい。。そういう運用探る）

## sitemap

これいつもなんとなくでやっていたので、そこまで分厚くなさそうだし、しっかり踏み込んでみる

### sitemap とは？

> サイトマップとは、サイト上のページや動画などのファイルについての情報や、各ファイルの関係を伝えるファイルです。Google などの検索エンジンは、このファイルを読み込んで、より効率的にクロールを行います。サイトマップはサイト内の重要なページとファイルを検索エンジンに伝えるだけでなく、重要なファイルについての貴重な情報（ページの最終更新日やすべての代替言語ページなど）も提供します。

> サイトマップを使用して、動画、画像、ニュースのコンテンツなど、ページ上の特定のタイプのコンテンツに関する情報を提供できます。次に例を示します。

- サイトマップの動画エントリには、動画の再生時間、評価、年齢制限のレーティングを指定できます。
- サイトマップの画像エントリには、ページ内の画像の位置を指定できます。
- サイトマップのニュース エントリには、記事のタイトルと公開日を含めることができます。

### サイトマップが必要かどうか

サイトの各ページが適切にリンクされていれば、Google は通常、サイトのほとんどのページを検出できます。適切にリンクされているというのは、なんらかのナビゲーション（ページに配置したサイトのメニューやリンクなど）によって重要なすべてのページに移動できる状態を指します。サイトの各ページが適切にリンクされている場合でも、大規模なサイト、複雑なサイト、専門性の高いファイルのクロールを改善する手段としてサイトマップが役立ちます。

### XML サイトマップに関するその他の注意事項

> - 他の XML ファイルと同様に、すべてのタグ値をエスケープする必要があります。
> - Google は、`<priority>` と ` <changefreq>` の値を無視します。
> - Google は、`<lastmod> ` 値が一貫して正確であることを（ページの最終更新との比較などにより）検証できる場合に、この値を使用します。

なので、
動的に生成される、記事ページなどでは、正しい最終更新日時を設定するのが良さそう

### 参考

- [サイトマップについて/google](https://developers.google.com/search/docs/crawling-indexing/sitemaps/overview?hl=ja)
- [Next.js App Router で sitemap.xml を生成する](https://zenn.dev/mh4gf/scraps/21803bbf1c2d25)
- [nextjs-seo/sitemap](https://dminhvu.com/post/nextjs-seo#sitemap)
- [hyperui での実装](https://github.com/markmead/hyperui/blob/main/app/sitemap.js)

## ブランチ戦略

テンプレートと、作成するサイトは、ブランチで分けることにした！

テンプレの方に、変更を加えたら、開発中のサイトの方にも変更を取り込む。

`cherry-pick` を使う

```zsh
git cherry-pick <コミットID>
```

https://zenn.dev/supersatton/articles/7e0c07c98356f5

また、特定のファイル、ディレクトリのみを取り込みたい時は、

```zsh
git checkout [取り込み元のブランチ] -- [特定のファイルの相対パス]
```

https://zenn.dev/nyatinte/articles/c4d5e02dfd5847

これによって、：
prettier とかの設定は、使いまわしたいので
`_boilerplate` ブランチにコミットしてから `main` に取り込む。
そしたら、次回以降 md ブログ付きのサイトを作成する際に、`_boilerplate` ブランチから始めれば楽ちん！
