---
date created: 2024-08-17, 04:22
date modified: 2024-08-18, 04:21
---

## やったこと

- ファスコンメンテ

LGTM

- font の実装
- デザイン実験と、検証用環境作成
- → 実装で色々なたんだが、少しわかってきた感じ。。！

## Next/font

基本的には、イシューにある通り、[公式](https://nextjs.org/docs/app/building-your-application/optimizing/fonts#using-multiple-fonts) を参考に設置刷れば OK！

気になること

- subsets
- preload のタイミング
- ローカルと本番の挙動の違い

まとめ：

subsets は、フォントファミリーの中で、特定の言語や文字セットに対応する部分的なフォントデータのこと。
ラテン、漢字、、など！
しかし、現在は、subsets で日本語を指定するとバグるらしい！

preload は、  
Next/font に備わっている、事前に必要なフォントデータを取得する機能！  
これにより、毎回 Google Fonts にデータを撮りにいかないので、パフォーマンスが向上する！

日本語フォントの場合は、ひらがな・カタカタ・漢字で、  
種類が多すぎるので、事前読み込みしない！

ローカルと本番の挙動の違い

ローカルで、`npm run dev`  で確認しても、うまく font が反映されていないケースがある。  
しかし、プロダクションビルドすれば、ちゃんと設定されていることが確認できる！  
preload の挙動には、注意！

claude にも聞いた

```md
### 1. Google Fonts の Subsets

**Subsets**とは、Google Fonts で提供されているフォントファミリーの中で、特定の言語や文字セットに対応する部分的なフォントデータのことを指します。各フォントには、異なる言語やスクリプト（例: ラテン文字、キリル文字、漢字など）に対応する複数のサブセットがあります。

#### 例:

- **Latin**: 英語やその他の西洋言語に使用される基本的なラテン文字セット
- **Latin Extended**: より多くのラテン文字を含み、ヨーロッパの多くの言語に対応
- **Cyrillic**: ロシア語やその他のキリル文字を使用する言語に対応
- **Japanese**: 日本語用の漢字やひらがな、カタカナに対応

**用途:**  
Web サイトに使用する場合、サイトに必要な文字セットだけを読み込むことで、フォントのファイルサイズを小さくし、読み込み速度を向上させることができます。

### 2. Preload

**Preload**は、ブラウザに特定のリソース（例えば、フォントファイルや画像、スクリプトなど）を優先的に読み込むよう指示する方法です。通常、リソースは HTML が読み込まれ、解析された後に要求されますが、`<link rel="preload">`タグを使用すると、HTML が完全に解析される前にリソースの読み込みを開始できます。

#### Preload の例:

html

<link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" as="style">

この例では、フォントをスタイルシートとして優先的に読み込むよう指示しています。これにより、フォントが早めに読み込まれ、ページのレンダリングをスムーズにすることができます。

#### Preload の利点:

- **表示速度の向上:** ページのレンダリングに重要なリソースを先に読み込むことで、初期表示速度が向上します。
- **フォントのフラッシュを防止:** フォントが遅れて読み込まれることによる「Flash of Unstyled Text (FOUT)」や「Flash of Invisible Text (FOIT)」を防ぎます。

### Subsets と Preload の組み合わせ

Web フォントを使用する際、必要なサブセットのみを指定し、そのフォントを Preload で早めに読み込むことで、ユーザーエクスペリエンスを大幅に向上させることができます。
```

オプションに関しては、下記が参考になった

> weight: フォントの太さ。font-weight で指定する値を入力。(必須) 配列で一気に指定もできます。
> display: フォントの読み込み中の表示方法を制御します。デフォルトは optional で、フォントが 100ms 以内にロードされない場合、自動生成されたフォールバックフォントがブラウザに表示されます。swap を指定するとフォントの読み込みが完了次第反映されるので、今回はこちらを設定しました。
> subsets: フォントのサブセット化 (使用するものだけを抜き出したフォントを、Web ブラウザ上に表示させる技術) します。複数言語を持つ場合、使用する言語を設定できます。\* 現在、中国語、日本語、または韓国語 (CJK) をサブセットとして選択すると [バグが発生する様子](https://github.com/vercel/next.js/pull/44594) です。
> preload: プリロード (事前読み込み) するかどうか。中国語、日本語、または韓国語は多くのデータを保持しているため、プリロードはオフにするのが良いです。この場合、display は swap に設定する必要があります。

参考：
https://zenn.dev/yuro/articles/433b938eea9cd5

## LGTM ステッカーの実装調査

メモ：

- ログポスト！記事 OG 風もいいかも
- 一言メッセージも
- 今の気分を、つぶやくとか
- LP/ヒーロセクションオマージュ。供養。。
- んー、マジでスタンプ・ステッカーみたいなのが理想なのかも！

実装懸念点

- 動的な値の扱い（デザインごとに違っていいか、揃えるか、カテゴリ毎か）
- API たくさん生やすのは、スケールしない。しかし１時的に。。！
- やっぱ実際に、具体的なデザインを同時に作っていくしかない。
- それで、あとから抽象化していく感じ。

→ 多分カテゴリー毎に API 生やすことで、動的なパラメータも揃える感じかと思う。

所感：
実装が、思ったより時間かかりそうだとわかった！
それと、デザインの用意！
